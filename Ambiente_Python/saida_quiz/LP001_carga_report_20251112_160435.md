# Relatório de Carga do Quiz (LP001)

- **Data/Hora**: 2025-11-12 16:04:35
- **Versão alvo**: v1 (id_versao=9)
- **Arquivo**: LP001_carga_report_20251112_160435.md

## SQLs de verificação utilizados

```sql
-- Versões do quiz
SELECT q.id_quiz, q.slug, v.id_versao, v.descricao
FROM lp001_quiz q
JOIN lp001_quiz_versao v ON v.id_quiz = q.id_quiz
WHERE q.slug='lp001';

-- Os três abaixo recebem id_versao como parâmetro
-- Domínios / Perguntas / Opções
SELECT COUNT(*) AS dominios FROM lp001_quiz_dominios WHERE id_versao=9;
SELECT COUNT(*) AS perguntas FROM lp001_quiz_perguntas WHERE id_versao=9;
SELECT COUNT(*) AS opcoes FROM lp001_quiz_opcoes WHERE id_pergunta IN
  (SELECT id_pergunta FROM lp001_quiz_perguntas WHERE id_versao=9);

-- Overrides e vínculo cargo→versão
SELECT COUNT(*) AS overrides FROM lp001_quiz_domain_weights_overrides WHERE id_versao=9;
SELECT c.nome AS cargo, m.id_versao
FROM lp001_quiz_cargo_map m
JOIN lp001_dom_cargos c ON c.id_cargo=m.id_cargo
WHERE m.id_versao=9
ORDER BY cargo;
```

## Resultados das verificações (executadas após a carga)

### Resultados das verificações (após a carga)

**Versões do quiz (slug='lp001')**
- id_quiz=5 | slug=lp001 | id_versao=9 | descricao=v1

**Contagens por versão (id_versao=9)**
- dominios: 5
- perguntas: 60
- opcoes: 240

**Overrides e vínculo cargo→versão (id_versao=9)**
- overrides: 9
- cargo=Analista | id_versao=9
- cargo=C-Level | id_versao=9
- cargo=Coordenador | id_versao=9
- cargo=Diretor | id_versao=9
- cargo=Especialista | id_versao=9
- cargo=Gerente | id_versao=9

## Log completo da execução

```text
==== CARGA DE CONTEÚDO | QUIZ (LP001) — INÍCIO ====
[PATH] BASE=C:\Meus_Projetos\OKRsystem\public_html\OKR_System\Ambiente_python
       AUX=C:\Meus_Projetos\OKRsystem\public_html\OKR_System\Ambiente_python\arquivos_auxiliares
       SRC=C:\Meus_Projetos\OKRsystem\public_html\OKR_System\Ambiente_python\arquivos_auxiliares\questionario.csv
       DOCS=C:\Meus_Projetos\OKRsystem\public_html\OKR_System\Ambiente_python\saida_quiz
[FLAGS] dry_run=False | purge=True | reset_versao=-
CONEXÃO COM BANCO - OK | db=planni40_okr | ver=5.7.23-23

[1/9] Leitura do CSV: C:\Meus_Projetos\OKRsystem\public_html\OKR_System\Ambiente_python\arquivos_auxiliares\questionario.csv
  - Tentando encoding='utf-8-sig', sep=auto …
    ✓ Lido com shape=(240, 8)
[INFO] CSV OK | encoding=utf-8-sig | sep=auto | shape=(240, 8)
[2/9] Colunas validadas.
[3/9] Normalizações (trim, quebras de linha, Nota)
  - Total linhas: 240 | Notas únicas: [0, 2, 6, 10]
[4/9] Inventário rápido e amostras
  - Posições: Analista, C-LEVEL, Coordenador, Diretor, Especialista, Gerente
  - Categorias: Cadência de Execução, Dados & Orçamento, Estratégia & Conselho, Estratégia & Portfólio, Rituais & Governança
  - Modelos: E-commerce, Manufatura, Multi-frentes
  - Primeiras 2 perguntas (amostra com alternativas):
Posição             Categoria                              Tema                                                                                                                                                                Questão                                                                                                                                     Alternativas  Nota
C-LEVEL Estratégia & Conselho S&OP e previsibilidade de demanda Seu Conselho cobrou previsibilidade de margem para 1º semestre. O forecast falhou 3 ciclos; o Diretor Industrial propõe “reforçar reuniões S&OP”. Qual KR você aprova?              Elevar acurácia de forecast M+1 de 62%→78% até 30/06/2026, travando S&OP na W1 e aplicando corte automático de variações >8% na W2.    10
C-LEVEL Estratégia & Conselho S&OP e previsibilidade de demanda Seu Conselho cobrou previsibilidade de margem para 1º semestre. O forecast falhou 3 ciclos; o Diretor Industrial propõe “reforçar reuniões S&OP”. Qual KR você aprova?         Rever agenda de S&OP até 31/01/2026, formalizando pautas e ampliando presença das áreas, com relatórios executivos ao final de cada mês.     6
C-LEVEL Estratégia & Conselho S&OP e previsibilidade de demanda Seu Conselho cobrou previsibilidade de margem para 1º semestre. O forecast falhou 3 ciclos; o Diretor Industrial propõe “reforçar reuniões S&OP”. Qual KR você aprova? Padronizar premissas de forecast até 31/01/2026, alinhando bases comerciais e industriais e divulgando o balanço de premissas a cada fechamento.     2
C-LEVEL Estratégia & Conselho S&OP e previsibilidade de demanda Seu Conselho cobrou previsibilidade de margem para 1º semestre. O forecast falhou 3 ciclos; o Diretor Industrial propõe “reforçar reuniões S&OP”. Qual KR você aprova?              Consolidar um cockpit mensal até 31/01/2026, exibindo demanda e produção por linha, bem como desvios, para discussão com diretores.     0
--------------------------------------------------------------------------------
Posição             Categoria                           Tema                                                                                                                                                                              Questão                                                                                                                                            Alternativas  Nota
C-LEVEL Estratégia & Conselho devoluções e pressão de margem As devoluções cresceram 28% no trimestre, estourando custos de logística reversa; o CMO sugere “mais campanhas de reputação”. O Conselho quer defesa de margem. Qual KR você sugere?   Reduzir taxa de devolução pós-entrega de 8,4%→5,5% até 30/06/2026, com verificação fotográfica pré-envio em 100% das ordens high-risk até 31/03/2026.    10
C-LEVEL Estratégia & Conselho devoluções e pressão de margem As devoluções cresceram 28% no trimestre, estourando custos de logística reversa; o CMO sugere “mais campanhas de reputação”. O Conselho quer defesa de margem. Qual KR você sugere? Aumentar conteúdos de reputação até 31/03/2026, com calendário editorial quinzenal e relatórios de sentimento nas principais categorias de alto volume.     6
C-LEVEL Estratégia & Conselho devoluções e pressão de margem As devoluções cresceram 28% no trimestre, estourando custos de logística reversa; o CMO sugere “mais campanhas de reputação”. O Conselho quer defesa de margem. Qual KR você sugere?              Publicar selo de qualidade em páginas críticas até 31/01/2026, reforçando confiança e agrupando FAQs e avaliações verificadas por produto.     2
C-LEVEL Estratégia & Conselho devoluções e pressão de margem As devoluções cresceram 28% no trimestre, estourando custos de logística reversa; o CMO sugere “mais campanhas de reputação”. O Conselho quer defesa de margem. Qual KR você sugere?               Intensificar comunicação de trocas até 31/01/2026, com e-mails transacionais e fluxos automatizados para orientar clientes após a compra.     0
--------------------------------------------------------------------------------

[5/9] Preparando perguntas únicas e ordem das opções
  - Perguntas únicas: 60 (esperado ~60)
  - Total de linhas de alternativas: 240 (esperado ~240)

[6/9] Gravando no banco (quiz, versão, domínios, cargos, perguntas, opções, overrides)
  - Quiz existente id=5
  ✓ Quiz id=5

[ PURGE ] Limpando conteúdo anterior do quiz (somente conteúdo; sem runtime)
  - Versões encontradas: v1(id=9)
  - Contagens BEFORE (por conjunto de versões):
      overrides: 9
      cargo_map: 6
      dominios : 5
      perguntas: 60
      opcoes   : 240
      recom_rules: 0
      check_rules: 0
  • FOREIGN_KEY_CHECKS=0 (ok)
  ✓ DELETE overrides | afetadas=9
  ✓ DELETE opcoes    | afetadas=240
  ✓ DELETE perguntas | afetadas=60
  ✓ DELETE cargo_map | afetadas=6
  ✓ DELETE dominios  | afetadas=5
  ✓ DELETE recom_rules | afetadas=0
  ✓ DELETE check_rules | afetadas=0
  • FOREIGN_KEY_CHECKS=1 (ok)
  - Contagens AFTER:
      overrides: 0
      cargo_map: 0
      dominios : 0
      perguntas: 0
      opcoes   : 0
  ✓ Purge concluído (conteúdo).
  - Versão existente id=9
  ✓ Versão alvo: 'v1' (id=9)
  - Domínios a garantir: 5 (peso_base=0.2)
  - Domínios prontos.
  - Cargos a garantir: Analista, C-LEVEL, Coordenador, Diretor, Especialista, Gerente
    • Vinculado cargo 'Analista' (id=7) à versão 9.
    • Vinculado cargo 'C-LEVEL' (id=10) à versão 9.
    • Vinculado cargo 'Coordenador' (id=9) à versão 9.
    • Vinculado cargo 'Diretor' (id=5) à versão 9.
    • Vinculado cargo 'Especialista' (id=8) à versão 9.
    • Vinculado cargo 'Gerente' (id=6) à versão 9.
  - Cargos e vínculo versão×cargo (1:1) prontos.
  - Ordem inicial (MAX atual da versão 9): 0
  ✓ Perguntas inseridas/atualizadas: 60
  ✓ Opções inseridas/atualizadas: 240
  - Aplicando overrides de pesos (cargo×domínio)…
  ✓ Overrides: inseridos=9 | atualizados=0
  ✓ Overrides de pesos inseridos/atualizados: 9

[SUCESSO] Commit realizado.

[7/9] Resumo:
  • Quiz: lp001 | Versão: v1
  • Perguntas (únicas): 60
  • Opções (total): 240
  • Overrides aplicados: 9 (peso_base=0.2)

[CHECKS FINAIS] SQLs de validação pós-carga

-- Versões do quiz (slug='lp001'):
  - id_quiz=5 | slug=lp001 | id_versao=9 | descricao=v1

-- Contagens por versão (id_versao=9):
  dominios  : 5
  perguntas : 60
  opcoes    : 240

-- Overrides e vínculo cargo→versão (id_versao=9):
  overrides : 9
  - cargo=Analista | id_versao=9
  - cargo=C-Level | id_versao=9
  - cargo=Coordenador | id_versao=9
  - cargo=Diretor | id_versao=9
  - cargo=Especialista | id_versao=9
  - cargo=Gerente | id_versao=9

-- Bloco SQL utilizado nas checagens (para documentação):

-- Versões do quiz
SELECT q.id_quiz, q.slug, v.id_versao, v.descricao
FROM lp001_quiz q
JOIN lp001_quiz_versao v ON v.id_quiz = q.id_quiz
WHERE q.slug='lp001';

-- Domínios / Perguntas / Opções
SELECT COUNT(*) AS dominios FROM lp001_quiz_dominios WHERE id_versao=9;
SELECT COUNT(*) AS perguntas FROM lp001_quiz_perguntas WHERE id_versao=9;
SELECT COUNT(*) AS opcoes FROM lp001_quiz_opcoes WHERE id_pergunta IN
  (SELECT id_pergunta FROM lp001_quiz_perguntas WHERE id_versao=9);

-- Overrides e vínculo cargo→versão
SELECT COUNT(*) AS overrides FROM lp001_quiz_domain_weights_overrides WHERE id_versao=9;
SELECT c.nome AS cargo, m.id_versao
FROM lp001_quiz_cargo_map m
JOIN lp001_dom_cargos c ON c.id_cargo=m.id_cargo
WHERE m.id_versao=9
ORDER BY cargo;

[8/9] Próximos passos:
  - Implementar runtime (sessões, respostas, cálculo e pdf/logs) no backend.
  - (Opcional) Popular lp001_quiz_result_profiles, recommendation_rules e checklist_rules.

[9/9] FIM
==== CARGA DE CONTEÚDO | CONCLUÍDO ====
```